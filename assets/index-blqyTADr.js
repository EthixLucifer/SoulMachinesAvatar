(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function d(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(n){if(n.ep)return;n.ep=!0;const t=d(n);fetch(n.href,t)}})();let c,r=null;const a="1";async function u(){const e=document.getElementById("sm-video");c=new Scene({apiKey:"eyJzb3VsSWQiOiJkZG5hLXNhbmctaGFuLS1kZW1vYXBwIiwiYXV0aFNlcnZlciI6Imh0dHBzOi8vZGguYXouc291bG1hY2hpbmVzLmNsb3VkL2FwaS9qd3QiLCJhdXRoVG9rZW4iOiJhcGlrZXlfdjFfMDllYTEyN2YtYjU2NS00ZjZmLWJmNTUtMTFjNTQwZjU1MmUwIn0=",videoElement:e,requestedMediaDevices:{microphone:!0,camera:!0},requiredMediaDevices:{microphone:!0,camera:!0}}),await c.connect().then(o=>f(o)).catch(o=>m(o))}function f(e){console.info("success! session id:",e),c.startVideo().then(o=>console.info("started video with state:",o)).catch(o=>console.warn("could not start video:",o))}function m(e){switch(e.name){case"noUserMedia":console.warn("user blocked device access");break;case"noScene":case"serverConnectionFailed":console.warn("server connection failed");break;default:console.warn("unhandled error:",e)}}const l=document.getElementById("connect-button");l.addEventListener("click",()=>{const e=document.getElementById("sm-video");u(),l.style.display="none",e.style.height="100%",e.style.width="100%"});function h(){console.log("stopSpeaking"),r||(r=new Persona(c,a)),r.stopSpeaking()}function p(){console.log("toggleUserMicrophone");const e=c.isMicrophoneActive();c.setMediaDeviceActive({microphone:!e}).then(()=>console.log("microphone active: "+e)).catch(o=>console.log("microphone update failed: ",o))}function y(e){const o=e.key||String.fromCharCode(e.keyCode);console.log("Key Code:",e.keyCode),console.log("Key Value:",o),o==="Enter"?h():o===" "&&p()}document.addEventListener("keydown",y);
