(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(n){if(n.ep)return;n.ep=!0;const t=a(n);fetch(n.href,t)}})();let c,r=null;const u="1";async function f(){const e=document.getElementById("sm-video");c=new Scene({apiKey:"eyJzb3VsSWQiOiJkZG5hLXNhbmctaGFuLS1kZW1vYXBwIiwiYXV0aFNlcnZlciI6Imh0dHBzOi8vZGguYXouc291bG1hY2hpbmVzLmNsb3VkL2FwaS9qd3QiLCJhdXRoVG9rZW4iOiJhcGlrZXlfdjFfMDllYTEyN2YtYjU2NS00ZjZmLWJmNTUtMTFjNTQwZjU1MmUwIn0=",videoElement:e,requestedMediaDevices:{microphone:!0,camera:!0},requiredMediaDevices:{microphone:!0,camera:!0}}),await c.connect().then(o=>m(o)).catch(o=>h(o))}function m(e){console.info("success! session id:",e),c.startVideo().then(o=>console.info("started video with state:",o)).catch(o=>console.warn("could not start video:",o))}function h(e){switch(e.name){case"noUserMedia":console.warn("user blocked device access");break;case"noScene":case"serverConnectionFailed":console.warn("server connection failed");break;default:console.warn("unhandled error:",e)}}const d=document.getElementById("connect-button");d.addEventListener("click",()=>{const e=document.getElementById("sm-video");f(),d.style.display="none",e.style.height="100%",e.style.width="100%"});function s(){r||(r=new Persona(c,u)),r.stopSpeaking()}function p(){const e=c.isMicrophoneActive();c.setMediaDeviceActive({microphone:!e})}function y(e){const o=e.key||String.fromCharCode(e.keyCode);switch(console.log("Key Code:",e.keyCode),console.log("Key Value:",o),o){case" ":console.log("Called stopSpeaking"),s();break;case"Enter":console.log("Called toggleUserMicrophone"),p();break}(o==="Enter"||o==="Enter")&&s()}document.addEventListener("keydown",y);
